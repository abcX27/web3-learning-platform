# Web3 学习平台 - 需求文档

## 项目概述

### 项目名称
Web3 学习平台（Web3 Learning Platform）

### 项目描述
一个全面的 Web3 学习平台，帮助开发者从零开始学习区块链和 Web3 开发技术。平台包含知识学习、实战练习、代码示例、在线编辑器等功能，并通过 Docker 容器化部署。

### 目标用户
- Web3 初学者
- 传统 Web 开发者转型 Web3
- 区块链技术爱好者
- 计算机专业学生

### 核心价值
- 系统化的学习路径
- 理论与实践结合
- 即时反馈和验证
- 社区互动支持

---

## 功能需求

### 1. 用户系统

#### 1.1 用户注册和登录
**用户故事：** 作为一个新用户，我希望能够注册账号并登录，以便保存我的学习进度。

**验收标准：**
- [ ] 用户可以通过邮箱注册账号
- [ ] 用户可以通过邮箱和密码登录
- [ ] 支持 MetaMask 钱包登录（Web3 方式）
- [ ] 密码需要加密存储
- [ ] 登录后显示用户头像和昵称
- [ ] 支持记住登录状态

#### 1.2 用户个人中心
**用户故事：** 作为一个登录用户，我希望有个人中心查看我的学习进度和成就。

**验收标准：**
- [ ] 显示学习进度（完成的课程数量和百分比）
- [ ] 显示获得的成就徽章
- [ ] 显示学习时长统计
- [ ] 可以编辑个人资料（头像、昵称、简介）
- [ ] 显示钱包地址（如果已连接）

---

### 2. 知识学习模块

#### 2.1 课程体系
**用户故事：** 作为一个学习者，我希望看到清晰的课程体系，了解学习路径。

**验收标准：**
- [ ] 显示完整的课程大纲（树状结构）
- [ ] 课程分为：基础、进阶、实战三个级别
- [ ] 每个课程显示预计学习时间
- [ ] 显示课程完成状态（未开始/进行中/已完成）
- [ ] 支持课程搜索和筛选

**课程内容结构：**
```
第一部分：区块链基础
├── 1.1 什么是区块链
├── 1.2 比特币和以太坊
├── 1.3 共识机制
└── 1.4 加密货币钱包

第二部分：智能合约开发
├── 2.1 Solidity 基础语法
├── 2.2 数据类型和变量
├── 2.3 函数和修饰符
├── 2.4 继承和接口
└── 2.5 事件和日志

第三部分：DApp 开发
├── 3.1 Web3.js / Ethers.js
├── 3.2 前端集成
├── 3.3 钱包连接
└── 3.4 交易处理

第四部分：实战项目
├── 4.1 ERC-20 代币
├── 4.2 NFT 合约
├── 4.3 去中心化交易所
└── 4.4 DAO 治理系统
```

#### 2.2 课程内容页面
**用户故事：** 作为一个学习者，我希望课程内容清晰易懂，包含文字、代码和图片。

**验收标准：**
- [ ] 支持 Markdown 格式的课程内容
- [ ] 支持代码高亮显示
- [ ] 支持图片和视频嵌入
- [ ] 支持代码复制功能
- [ ] 显示课程导航（上一课/下一课）
- [ ] 显示课程进度条
- [ ] 支持标记课程为已完成

#### 2.3 代码示例
**用户故事：** 作为一个学习者，我希望看到完整的代码示例，并能够运行和修改。

**验收标准：**
- [ ] 每个知识点提供完整的代码示例
- [ ] 代码示例包含详细注释
- [ ] 支持代码语法高亮
- [ ] 提供"在编辑器中打开"按钮
- [ ] 显示代码运行结果

---

### 3. 在线编辑器

#### 3.1 Solidity 编辑器
**用户故事：** 作为一个学习者，我希望能在浏览器中编写和测试 Solidity 代码。

**验收标准：**
- [ ] 提供代码编辑器（Monaco Editor 或 CodeMirror）
- [ ] 支持 Solidity 语法高亮
- [ ] 支持代码自动补全
- [ ] 支持代码格式化
- [ ] 显示编译错误和警告
- [ ] 支持编译合约
- [ ] 支持部署到测试网
- [ ] 显示合约地址和交易哈希

#### 3.2 JavaScript 编辑器
**用户故事：** 作为一个学习者，我希望能编写和测试与区块链交互的 JavaScript 代码。

**验收标准：**
- [ ] 提供 JavaScript 代码编辑器
- [ ] 支持 ES6+ 语法
- [ ] 集成 Ethers.js 库
- [ ] 支持连接 MetaMask
- [ ] 显示执行结果和日志
- [ ] 支持错误捕获和显示

---

### 4. 实战练习

#### 4.1 编程挑战
**用户故事：** 作为一个学习者，我希望通过编程挑战来巩固所学知识。

**验收标准：**
- [ ] 提供多个难度级别的挑战
- [ ] 每个挑战有清晰的题目描述
- [ ] 提供初始代码模板
- [ ] 支持提交代码进行验证
- [ ] 显示测试用例通过情况
- [ ] 通过后显示参考答案
- [ ] 记录挑战完成状态

#### 4.2 项目实战
**用户故事：** 作为一个学习者，我希望通过完整的项目来实践 Web3 开发。

**验收标准：**
- [ ] 提供完整的项目教程
- [ ] 项目分为多个步骤
- [ ] 每个步骤有详细说明
- [ ] 提供项目模板代码
- [ ] 支持在线预览项目效果
- [ ] 提供项目源码下载

---

### 5. 社区功能

#### 5.1 讨论区
**用户故事：** 作为一个学习者，我希望能在社区中提问和讨论。

**验收标准：**
- [ ] 用户可以发布问题
- [ ] 用户可以回复问题
- [ ] 支持 Markdown 格式
- [ ] 支持代码块
- [ ] 支持点赞和收藏
- [ ] 显示最热门的讨论
- [ ] 支持搜索讨论

#### 5.2 学习笔记
**用户故事：** 作为一个学习者，我希望能记录学习笔记。

**验收标准：**
- [ ] 用户可以创建笔记
- [ ] 支持 Markdown 编辑
- [ ] 笔记可以关联到课程
- [ ] 支持笔记分类和标签
- [ ] 支持笔记搜索
- [ ] 可以设置笔记为公开或私有

---

### 6. 成就系统

#### 6.1 徽章系统
**用户故事：** 作为一个学习者，我希望通过完成任务获得成就徽章。

**验收标准：**
- [ ] 完成课程获得徽章
- [ ] 完成挑战获得徽章
- [ ] 完成项目获得徽章
- [ ] 连续学习获得徽章
- [ ] 在个人中心显示所有徽章
- [ ] 徽章有不同的等级（铜、银、金）

#### 6.2 排行榜
**用户故事：** 作为一个学习者，我希望看到学习排行榜，激励自己学习。

**验收标准：**
- [ ] 显示学习时长排行
- [ ] 显示完成课程数排行
- [ ] 显示挑战完成数排行
- [ ] 支持周榜、月榜、总榜
- [ ] 显示自己的排名

---

### 7. 管理后台

#### 7.1 课程管理
**用户故事：** 作为管理员，我希望能够管理课程内容。

**验收标准：**
- [ ] 可以创建、编辑、删除课程
- [ ] 支持 Markdown 编辑器
- [ ] 可以上传图片和视频
- [ ] 可以设置课程顺序
- [ ] 可以发布或隐藏课程

#### 7.2 用户管理
**用户故事：** 作为管理员，我希望能够管理用户。

**验收标准：**
- [ ] 查看所有用户列表
- [ ] 查看用户详细信息
- [ ] 可以禁用或启用用户
- [ ] 查看用户学习统计

---

## 非功能需求

### 1. 性能要求
- [ ] 页面加载时间 < 3 秒
- [ ] 代码编译时间 < 5 秒
- [ ] 支持 1000+ 并发用户
- [ ] 数据库查询响应时间 < 100ms

### 2. 安全要求
- [ ] 所有密码必须加密存储（bcrypt）
- [ ] 使用 HTTPS 加密传输
- [ ] 防止 SQL 注入
- [ ] 防止 XSS 攻击
- [ ] 实现 CSRF 保护
- [ ] API 需要身份验证

### 3. 可用性要求
- [ ] 响应式设计，支持移动端
- [ ] 支持主流浏览器（Chrome, Firefox, Safari, Edge）
- [ ] 界面简洁直观
- [ ] 提供操作提示和帮助文档

### 4. 可维护性要求
- [ ] 代码遵循统一的编码规范
- [ ] 关键功能有单元测试
- [ ] 提供 API 文档
- [ ] 使用 Docker 容器化部署
- [ ] 提供日志记录和监控

---

## 技术栈

### 前端
- **框架：** Next.js 14 (React)
- **UI 库：** Tailwind CSS + shadcn/ui
- **状态管理：** Zustand
- **代码编辑器：** Monaco Editor
- **Web3 库：** Ethers.js v6
- **Markdown：** react-markdown

### 后端
- **框架：** Node.js + Express
- **数据库：** PostgreSQL
- **ORM：** Prisma
- **认证：** JWT + Passport.js
- **文件存储：** MinIO (S3 兼容)

### 区块链
- **网络：** Sepolia 测试网
- **编译器：** Solc.js
- **节点：** Infura / Alchemy

### DevOps
- **容器化：** Docker + Docker Compose
- **反向代理：** Nginx
- **CI/CD：** GitHub Actions
- **监控：** Prometheus + Grafana

---

## 部署架构

```
┌─────────────────────────────────────────┐
│           Nginx (反向代理)               │
│         (端口 80/443)                    │
└─────────────┬───────────────────────────┘
              │
    ┌─────────┴─────────┐
    │                   │
┌───▼────┐        ┌────▼─────┐
│ 前端    │        │ 后端 API  │
│ Next.js│        │ Express  │
│ (3000) │        │ (4000)   │
└────────┘        └─────┬────┘
                        │
              ┌─────────┴─────────┐
              │                   │
        ┌─────▼──────┐     ┌─────▼─────┐
        │ PostgreSQL │     │   MinIO   │
        │   (5432)   │     │   (9000)  │
        └────────────┘     └───────────┘
```

---

## 项目里程碑

### 阶段 1：基础架构（2 周）
- [ ] 项目初始化
- [ ] Docker 环境搭建
- [ ] 数据库设计
- [ ] 基础 API 开发
- [ ] 前端框架搭建

### 阶段 2：核心功能（4 周）
- [ ] 用户系统
- [ ] 课程展示
- [ ] 在线编辑器
- [ ] 代码编译和执行

### 阶段 3：进阶功能（3 周）
- [ ] 实战练习
- [ ] 社区功能
- [ ] 成就系统
- [ ] 管理后台

### 阶段 4：优化和测试（2 周）
- [ ] 性能优化
- [ ] 安全加固
- [ ] 测试和修复
- [ ] 文档完善

### 阶段 5：上线部署（1 周）
- [ ] 生产环境部署
- [ ] 监控配置
- [ ] 备份策略
- [ ] 用户培训

---

## 成功指标

### 用户指标
- 注册用户数 > 1000
- 日活跃用户 > 100
- 课程完成率 > 60%
- 用户留存率（7天）> 40%

### 技术指标
- 系统可用性 > 99%
- 页面加载时间 < 3s
- API 响应时间 < 200ms
- 错误率 < 1%

### 内容指标
- 课程数量 > 50
- 代码示例 > 100
- 编程挑战 > 30
- 实战项目 > 10

---

## 风险和挑战

### 技术风险
1. **区块链节点稳定性**
   - 风险：依赖第三方节点服务可能不稳定
   - 缓解：使用多个节点提供商，实现故障转移

2. **代码编译性能**
   - 风险：在线编译可能较慢
   - 缓解：使用 Web Worker，实现异步编译

3. **安全漏洞**
   - 风险：用户提交的代码可能包含恶意内容
   - 缓解：沙箱环境执行，严格的输入验证

### 业务风险
1. **内容质量**
   - 风险：课程内容可能不够专业
   - 缓解：邀请专家审核，收集用户反馈

2. **用户获取**
   - 风险：初期用户量可能不足
   - 缓解：社交媒体推广，与社区合作

---

## 下一步

1. ✅ 完成需求文档
2. ⏭️ 创建设计文档（UI/UX 设计、数据库设计、API 设计）
3. ⏭️ 创建任务列表（拆分成小任务）
4. ⏭️ 开始开发

---

**文档版本：** v1.0  
**创建日期：** 2025-02-04  
**最后更新：** 2025-02-04  
**负责人：** 开发团队
